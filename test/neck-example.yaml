#
# Demo neck yaml file.
# Used for testing and development of complex neck mechanisms.
#
# To run:
# 0) export ROS_NAMESPACE=foo
# 1) restart roscore
# 2) rosparam load pau2motors/test/neck-example.yaml
# 3) rosrun pau2motors pau2motors_node.py
# 4) rosrun topic_tools mux /foo/neck_pau  cmd_neck_pau /blender_api/get_pau mux:=neck_pau_mux
# 5) rosservice call neck_pau_mux/select /blender_api/get_pau
# 6) blender -y Eva.blend -P autostart.py
#
# or alternately:
# 5) rosservice call neck_pau_mux/select /cmd_neck_pau
# 6) rosrun basic_head_api head_ctrl.py
# 7) rostopic pub --once /point_head basic_head_api/PointHead '{yaw: 0.1, pitch:0.2, roll:0.3}' 
#
# Verify operation:
# rostopic echo /foo/left_motor
# rostopic echo /foo/right_motor
# rostopic echo /foo/axis_motor

pau2motors:
    # --- topics to be publsihed: one per motor
    topics:
        neck_pau: neck_axis;neck_left;neck_right

    motors:
      # ---Neck---
      neck_axis:
        binding:
          parser:
            name: getproperty
            property: m_headRotation
          function:
            - name: quaternion2euler
              axis: z
            - name: linear
              scale: -2.92
              translate: 0
          hardware:
            name: dynamixel
            topic: axis
        min: -1.57
        max: 1.57

      neck_left:
        binding:
          parser:
            name: getproperty
            property: m_headRotation
          function:
            - name: quaternion2euler
              axis: x
            - name: linear
              scale: 1.3
              translate: 0
          hardware:
            name: dynamixel
            topic: left_motor
        min: -1.57
        max: 1.57

      neck_right:
        binding:
          parser:
            name: getproperty
            property: m_headRotation
          function:
            - name: quaternion2euler
              axis: x
            - name: linear
              scale: -1.3
              translate: 0
          hardware:
            name: dynamixel
            topic: right_motor
        min: -1.57
        max: 1.57

